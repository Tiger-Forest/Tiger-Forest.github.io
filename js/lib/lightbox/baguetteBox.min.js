!function(e,t){"use strict";"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.baguetteBox=t()}(this,function(){"use strict";function s(e){-1!==e.target.id.indexOf("baguette-img")&&T()}function l(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,A()}function r(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,L()}function u(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,T()}function c(e){t.count++,1<t.count&&(t.multitouch=!0),t.startX=e.changedTouches[0].pageX,t.startY=e.changedTouches[0].pageY}function d(e){i||t.multitouch||(e.preventDefault?e.preventDefault():e.returnValue=!1,40<(e=e.touches[0]||e.changedTouches[0]).pageX-t.startX?(i=!0,A()):e.pageX-t.startX<-40?(i=!0,L()):100<t.startY-e.pageY&&T())}function f(){t.count--,t.count<=0&&(t.multitouch=!1),i=!1}function g(){f()}function p(e){"block"===b.style.display&&b.contains&&!b.contains(e.target)&&(e.stopPropagation(),R())}var b,m,v,h,y,w={},q={captions:!0,buttons:"auto",fullScreen:!1,noScrollbars:!1,bodyClass:"baguetteBox-open",titleTag:!1,async:!1,preload:2,animation:"slideIn",afterShow:null,afterHide:null,onChange:null,overlayBackgroundColor:"rgba(0,0,0,.8)"},k={},x=[],o=0,n=!1,t={},i=!1,X=/.+\.(gif|jpe?g|png|webp)/i,E={},C=[],a=null;function D(e){var t;E.hasOwnProperty(e)&&(t=E[e].galleries,[].forEach.call(t,function(e){[].forEach.call(e,function(e){I(e.imageElement,"click",e.eventHandler)}),x===e&&(x=[])}),delete E[e])}function B(e){switch(e.keyCode){case 37:A();break;case 39:L();break;case 27:T();break;case 36:(t=e)&&t.preventDefault(),P(0);break;case 35:(t=e)&&t.preventDefault(),P(x.length-1)}var t}function M(e,t){if(x!==e){x=e;var n,o=t;for(n in o=o||{},q)w[n]=q[n],void 0!==o[n]&&(w[n]=o[n]);m.style.transition=m.style.webkitTransition="fadeIn"===w.animation?"opacity .4s ease":"slideIn"===w.animation?"":"none","auto"===w.buttons&&("ontouchstart"in window||1===x.length)&&(w.buttons=!1),v.style.display=h.style.display=w.buttons?"":"none";try{b.style.backgroundColor=w.overlayBackgroundColor}catch(e){}for(;m.firstChild;)m.removeChild(m.firstChild);for(var i,a=[],s=[],l=C.length=0;l<e.length;l++)(i=j("div")).className="full-image",i.id="baguette-img-"+l,C.push(i),a.push("baguetteBox-figure-"+l),s.push("baguetteBox-figcaption-"+l),m.appendChild(C[l]);b.setAttribute("aria-labelledby",a.join(" ")),b.setAttribute("aria-describedby",s.join(" "))}}function O(e){w.noScrollbars&&(document.documentElement.style.overflowY="hidden",document.body.style.overflowY="scroll"),"block"!==b.style.display&&(H(document,"keydown",B),t={count:0,startX:null,startY:null},N(o=e,function(){S(o),F(o)}),V(),b.style.display="block",w.fullScreen&&(b.requestFullscreen?b.requestFullscreen():b.webkitRequestFullscreen?b.webkitRequestFullscreen():b.mozRequestFullScreen&&b.mozRequestFullScreen()),setTimeout(function(){b.className="visible",w.bodyClass&&document.body.classList&&document.body.classList.add(w.bodyClass),w.afterShow&&w.afterShow()},50),w.onChange&&w.onChange(o,C.length),a=document.activeElement,R(),n=!0)}function R(){(w.buttons?v:y).focus()}function T(){w.noScrollbars&&(document.documentElement.style.overflowY="auto",document.body.style.overflowY="auto"),"none"!==b.style.display&&(I(document,"keydown",B),b.className="",setTimeout(function(){b.style.display="none",document.fullscreen&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()),w.bodyClass&&document.body.classList&&document.body.classList.remove(w.bodyClass),w.afterHide&&w.afterHide(),a&&a.focus(),n=!1},500))}function N(t,n){var e,o,i,a,s=C[t],l=x[t];void 0!==s&&void 0!==l&&(s.getElementsByTagName("img")[0]?n&&n():(e=(l=l.imageElement).getElementsByTagName("img")[0],o="function"==typeof w.captions?w.captions.call(x,l):l.getAttribute("data-caption")||l.title,l=function(e){var t=e.href;if(e.dataset){var n,o=[];for(n in e.dataset)"at-"!==n.substring(0,3)||isNaN(n.substring(3))||(o[n.replace("at-","")]=e.dataset[n]);for(var i=Object.keys(o).sort(function(e,t){return parseInt(e,10)<parseInt(t,10)?-1:1}),a=window.innerWidth*window.devicePixelRatio,s=0;s<i.length-1&&i[s]<a;)s++;t=o[i[s]]||t}return t}(l),(i=j("figure")).id="baguetteBox-figure-"+t,i.innerHTML='<div class="baguetteBox-spinner"><div class="baguetteBox-double-bounce1"></div><div class="baguetteBox-double-bounce2"></div></div>',w.captions&&o&&((a=j("figcaption")).id="baguetteBox-figcaption-"+t,a.innerHTML=o,i.appendChild(a)),s.appendChild(i),(a=j("img")).onload=function(){var e=document.querySelector("#baguette-img-"+t+" .baguetteBox-spinner");i.removeChild(e),!w.async&&n&&n()},a.setAttribute("src",l),a.alt=e&&e.alt||"",w.titleTag&&o&&(a.title=o),i.appendChild(a),w.async&&n&&n()))}function L(){return P(o+1)}function A(){return P(o-1)}function P(e,t){return!n&&0<=e&&e<t.length?(M(t,w),O(e),!0):e<0?(w.animation&&z("left"),!1):e>=C.length?(w.animation&&z("right"),!1):(N(o=e,function(){S(o),F(o)}),V(),w.onChange&&w.onChange(o,C.length),!0)}function z(e){m.className="bounce-from-"+e,setTimeout(function(){m.className=""},400)}function V(){var e=100*-o+"%";"fadeIn"===w.animation?(m.style.opacity=0,setTimeout(function(){k.transforms?m.style.transform=m.style.webkitTransform="translate3d("+e+",0,0)":m.style.left=e,m.style.opacity=1},400)):k.transforms?m.style.transform=m.style.webkitTransform="translate3d("+e+",0,0)":m.style.left=e}function S(e){e-o>=w.preload||N(e+1,function(){S(e+1)})}function F(e){o-e>=w.preload||N(e-1,function(){F(e-1)})}function H(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent("on"+t,function(e){(e=e||window.event).target=e.target||e.srcElement,n(e)})}function I(e,t,n,o){e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent("on"+t,n)}function Y(e){return document.getElementById(e)}function j(e){return document.createElement(e)}return[].forEach||(Array.prototype.forEach=function(e,t){for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)}),[].filter||(Array.prototype.filter=function(e,t,n,o,i){for(n=this,o=[],i=0;i<n.length;i++)e.call(t,n[i],i,n)&&o.push(n[i]);return o}),{run:function(e,t){return k.transforms=void 0!==(i=j("div")).style.perspective||void 0!==i.style.webkitPerspective,k.svg=((i=j("div")).innerHTML="<svg/>","http://www.w3.org/2000/svg"===(i.firstChild&&i.firstChild.namespaceURI)),k.passiveEvents=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}(),(b=Y("baguetteBox-overlay"))?(m=Y("baguetteBox-slider"),v=Y("previous-button"),h=Y("next-button"),y=Y("close-button")):((b=j("div")).setAttribute("role","dialog"),b.id="baguetteBox-overlay",document.getElementsByTagName("body")[0].appendChild(b),(m=j("div")).id="baguetteBox-slider",b.appendChild(m),(v=j("button")).setAttribute("type","button"),v.id="previous-button",v.setAttribute("aria-label","Previous"),v.innerHTML=k.svg?'<svg width="44" height="60"><polyline points="30 10 10 30 30 50" stroke="rgba(255,255,255,0.5)" stroke-width="4"stroke-linecap="butt" fill="none" stroke-linejoin="round"/></svg>':"&lt;",b.appendChild(v),(h=j("button")).setAttribute("type","button"),h.id="next-button",h.setAttribute("aria-label","Next"),h.innerHTML=k.svg?'<svg width="44" height="60"><polyline points="14 10 34 30 14 50" stroke="rgba(255,255,255,0.5)" stroke-width="4"stroke-linecap="butt" fill="none" stroke-linejoin="round"/></svg>':"&gt;",b.appendChild(h),(y=j("button")).setAttribute("type","button"),y.id="close-button",y.setAttribute("aria-label","Close"),y.innerHTML=k.svg?'<svg width="30" height="30"><g stroke="rgb(160,160,160)" stroke-width="4"><line x1="5" y1="5" x2="25" y2="25"/><line x1="5" y1="25" x2="25" y2="5"/></g></svg>':"&times;",b.appendChild(y),v.className=h.className=y.className="baguetteBox-button",i=k.passiveEvents?{passive:!1}:null,o=k.passiveEvents?{passive:!0}:null,H(b,"click",s),H(v,"click",l),H(h,"click",r),H(y,"click",u),H(m,"contextmenu",g),H(b,"touchstart",c,o),H(b,"touchmove",d,i),H(b,"touchend",f),H(document,"focus",p,!0)),D(e),o=e,a=t,i=document.querySelectorAll(o),n={galleries:[],nodeList:i},E[o]=n,[].forEach.call(i,function(e){a&&a.filter&&(X=a.filter);var i,e="A"===e.tagName?[e]:e.getElementsByTagName("a");0!==(e=[].filter.call(e,function(e){if(-1===e.className.indexOf(a&&a.ignoreClass))return X.test(e.href)})).length&&(i=[],[].forEach.call(e,function(e,t){function n(e){e.preventDefault?e.preventDefault():e.returnValue=!1,M(i,a),O(t)}var o={eventHandler:n,imageElement:e};H(e,"click",n),i.push(o)}),n.galleries.push(i))}),n.galleries;var a,n,o,i},show:P,showNext:L,showPrevious:A,hide:T,destroy:function(){for(var e in t=k.passiveEvents?{passive:!1}:null,n=k.passiveEvents?{passive:!0}:null,I(b,"click",s),I(v,"click",l),I(h,"click",r),I(y,"click",u),I(m,"contextmenu",g),I(b,"touchstart",c,n),I(b,"touchmove",d,t),I(b,"touchend",f),I(document,"focus",p,!0),E)E.hasOwnProperty(e)&&D(e);var t,n;I(document,"keydown",B),document.getElementsByTagName("body")[0].removeChild(document.getElementById("baguetteBox-overlay")),E={},x=[],o=0}}});